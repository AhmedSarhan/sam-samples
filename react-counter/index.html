<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Basic Click Counter Example with JSX</title>
    <link rel="stylesheet" href="../shared/css/base.css" />
  </head>
  <body>
    <h1>SAM Implementation of the Basic Click Counter Example with JSX</h1>
    <div id="container">
      <p>
        To install React, follow the instructions on
        <a href="https://github.com/facebook/react/">GitHub</a>.
      </p>
      <p>
        If you can see this, React is <strong>not</strong> working right.
        If you checked out the source from GitHub make sure to run <code>grunt</code>.
      </p>
    </div>
    <br><br>
    <h4>Example Details</h4>
    <p>This is written with with React, using JSX and transformed in the browser.</p>
    <p>This example has been implemented following the SAM pattern which makes the view components stateless.</p>
    <p>
      Learn more about SAM at
      <a href="https://sam.js.org/" target="_blank">sam.js.org</a>.<br>         
      Learn more about React at 
      <a href="https://facebook.github.io/react" target="_blank">facebook.github.io/react</a>.
    </p>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.0.2/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.0.2/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.24/browser.min.js"></script>
    <script type="text/babel">
    
        // modified by Jean-Jacques Dubray  jdubray@xgen.io
        
    
        // SAM  
        var model = { count: 0 } 
        //-------------------------------------------------------
        model.present = ( data ) =>  {
            data.incrementBy = data.incrementBy || 1 
            model.count += data.incrementBy 
            state.render(model) 
        } 
    
        var state = {} ;
        //-------------------------------------------------------
        state.render = (m) => {
            theme.display(m) ;
        }
        
        
        var actions = {} 
        //------------------------------------------------------- 
        actions.click = () => model.present({incrementBy:1}) 
        

        // Here are the view components
        // SAM makes React components stateless  
        var theme = { } ;

        theme.counter = (c,a) => <Counter count={c} action={a}/> 
  
        theme.display = (m) => ReactDOM.render(
                               theme.counter(m.count,actions.click),
                               document.getElementById('container')
                             ) 
        
        var Counter = (props) =>  (
            <button onClick={props.action}>
              Click me! Number of clicks: {props.count}
            </button>
          )
      
        // init
        state.render(model) 
      
      
    </script>
  </body>
</html>
